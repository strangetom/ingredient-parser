<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="Description" content="Ingredient Parser Tester"/>
        <meta name="viewport" content="width=device-width"/>
        <title>Label Editor</title>
        <link rel="stylesheet" type="text/css" href="/static/css/label-editor.css"/>
        <script src="/static/js/label-editor.js"></script>
    </head>
    <body>
        <header>
            <div>
                <p>Dataset:</p>
                <h1>
                    {{ dataset }}
                    <span class="data-length">({{ data|length }} sentences)</span>                    
                </h1>
                <h2>* Foundation Food</h2>
            </div>
            <div class="controls">
                <div class="control-group">
                    <button id="save-btn">Save</button>
                </div>
                <div class="control-group">
                    {%- if page_start_idx is not none -%}
                    <a href="/edit/{{ dataset }}?start={{ page_start_idx+page_range }}&range={{ page_range }}">Next page</a>
                    {%- if page_start_idx > 0 -%}
                    <a href="/edit/{{ dataset }}?start={{ (page_start_idx-page_range, 0)|max }}&range={{ page_range }}">Previous page</a>
                    {%- endif -%}
                    {%- endif -%}
                </div>
            </div>
        </header>

        <main>
            {%- for entry in data -%}
            <div class="entry" data-index="{{ entry.id }}">
                <p>
                    <span class="index" data-dataset="{{ entry.source }}">{{ entry.id }}:</span>
                    <span class="sentence">{{ entry.sentence }}</span>
                    <button class="copy">Copy</button>
                    <button class="delete">Delete</button>
                </p>
                <table>
                    <tr>
                        {%- for token in entry.tokens -%}
                        <td>
                            <div>
                                <input id="{{ entry.id }}-{{ loop.index0 }}" name="{{ entry.id }}-{{ loop.index0 }}" type="checkbox" {{ "checked" if loop.index0 in entry.foundation_foods }} />
                                <label for="{{ entry.id }}-{{ loop.index0 }}">{{ token }}</label>
                            </div>
                        </td>
                        {%- endfor -%}
                    </tr>
                    <tr>
                        {%- for label in entry.labels -%}
                        <td class="{{ label }}">
                            <select>
                              <option value="OTHER" {{ "selected" if label == "OTHER" }}></option>
                              <option value="QTY" {{ "selected" if label == "QTY" }}>QTY</option>
                              <option value="UNIT" {{ "selected" if label == "UNIT" }}>UNIT</option>
                              <option value="NAME" {{ "selected" if label == "NAME" }}>NAME</option>
                              <option value="SIZE" {{ "selected" if label == "SIZE" }}>SIZE</option>
                              <option value="PREP" {{ "selected" if label == "PREP" }}>PREP</option>
                              <option value="PUNC" {{ "selected" if label == "PUNC" }}>PUNC</option>
                              <option value="PURPOSE" {{ "selected" if label == "PURPOSE" }}>PURPOSE</option>
                              <option value="COMMENT" {{ "selected" if label == "COMMENT" }}>COMMENT</option>
                            </select>
                        </td>
                        {%- endfor -%}
                    </tr>
                    <tr>
                        {%- for label in entry.foundation_labels -%}
                        <td class="{{ label }}">
                            <select>
                              <option value="O" {{ "selected" if label == "O" }}>O</option>
                              <option value="B_NAME" {{ "selected" if label == "B_NAME" }}>B_NAME</option>
                              <option value="B_PREFIX" {{ "selected" if label == "B_PREFIX" }}>B_PREFIX</option>
                              <option value="B_GLOBAL" {{ "selected" if label == "B_GLOBAL" }}>B_GLOBAL</option>
                              <option value="I_NAME" {{ "selected" if label == "I_NAME" }}>I_NAME</option>
                              <option value="I_PREFIX" {{ "selected" if label == "I_PREFIX" }}>I_PREFIX</option>
                              <option value="I_GLOBAL" {{ "selected" if label == "I_GLOBAL" }}>I_GLOBAL</option>
                              <option value="N_SPLIT" {{ "selected" if label == "N_SPLIT" }}>N_SPLIT</option>
                              <option value="ING_SPLIT" {{ "selected" if label == "ING_SPLIT" }}>ING_SPLIT</option>
                            </select>
                        </td>
                        {%- endfor -%}
                    </tr>
                </table>
            </div>
            {%- endfor -%}
        </main>
    </body>
</html>